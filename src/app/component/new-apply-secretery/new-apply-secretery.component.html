<app-header></app-header>
<link rel="stylesheet"
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />

<div class="row justify-content-center">
  <div class="col-1"><span (click)="return()" style="cursor:pointer" class="material-symbols-outlined">
      keyboard_return
    </span></div>
  <h2 class="col-9">{{zman}} {{nameEmployee}} </h2>
</div>
<div class="container">
  <form [formGroup]="form" action="/action_page.php">
    <div class="row ">
      <div class="col-md-2 blockquote ">
        <label for="mobile">טלפון הפונה לחזרה<span class="glyphicon glyphicon-earphone"></span><span
            class="required-label"></span></label>
      </div>
      <div class="col-2">
        <input formControlName="mobileNumber" type="text" [(ngModel)]="phoneAsker" id="mobile" name="mobile"
          maxlength="13" placeholder="000 000 000" dir="rtl" >
        <span
          *ngIf="form.get('mobileNumber')?.invalid && (form.get('mobileNumber')?.dirty || form.get('mobileNumber')?.touched)"
          style="color:red;">{{getErrorMessageMobileNumber()}}
        </span>
      </div>
      <div class="col-1"></div>
      <div class="col-2 blockquote">
        <label for="nameApply">שם הפונה <span class="glyphicon glyphicon-pencil "></span><span
            class="required-label"></span></label>
      </div>
      <div class="col-2">
        <input formControlName="hebrewLetters" type="text" [(ngModel)]="nameApply" id="nameApply" name="nameApply"
          placeholder="שם הפונה">
        <span
          *ngIf="form.get('hebrewLetters')?.invalid && (form.get('hebrewLetters')?.dirty || form.get('hebrewLetters')?.touched)"
          style="color:red;">{{getErrorMessageHebrewLetters()}}
        </span>
      </div>
    </div>
    <div class="row">
      <div class="col-2 blockquote ">
        <label for="causeReferral" class="required-label">סיבת הפניה</label>
      </div>
      <div class="col-2">
        <select id="selectedValue" name="selectedValue" formControlName="selectedValueControl"
          (change)="onSelectedValueChange()" required>
          <option *ngFor="let item of arrayCauseReferral" value="{{item.descreption}}">{{item.descreption}}</option>
        </select>
      </div>
      <div class="col-1"></div>
      <div class="col-2 blockquote">
        <label for="mobile" class="required-label"> רמת דחיפות</label>
      </div>
      <div class="col-2">
        <select id="selectedValue" name="selectedValueLevelUrgency" formControlName="selectedValueControlLevelUrgency"
          (change)="onSelectedValueChangeLevelUrgency()" required>
          <option *ngFor="let item of arrayLevelUrgency" value="{{item.name}}">{{item.name}}</option>
        </select>

      </div>
    </div>
    <div *ngIf="isAnotherCause==true" class="row">
      <div class="col-2 blockquote">
        <label for="causeReferral">פירוט סיבת פנייה : <span class="glyphicon glyphicon-pencil"></span></label>
      </div>
      <div class="col-3">
        <input type="text" formControlName="valueDetailsAnotherCause" [(ngModel)]="newApply.detailsAnotherCause"
          id="nameApply" name="nameApply" placeholder="פירוט סיבת הפנייה" dir="rtl">
      </div>
    </div>


    <div class="row">
      <div class="col-2 blockquote ">
        <label for="causeReferral" class="required-label"> זיקה למושא הפנייה</label>
      </div>
      <div class="col-2">
        <select id="selectedValueR" name="selectedValueR" [(ngModel)]="selectedValueR"
          (ngModelChange)="onSelectedValueChangeR($event)" formControlName="affinity" required>
          <option style="text-align: right;" *ngFor="let r of arrayReferral" [value]="r.name">{{r.name}}</option>
        </select>
      </div>
      <div *ngIf="isAnotherR==true" class="row"></div>
      <div *ngIf="isAnotherR==true" class="col-2 blockquote">
        <label for="mobile" class="required-label"> פירוט הזיקה</label>
      </div>
      <div *ngIf="isAnotherR==true" class="col-2">
        <input type="text" matInput id="selectedValueRO" name="selectedValueRO" [(ngModel)]="newDetailsAsker.affinity"
          formControlName="affinityO">
      </div>
      <div class="col-1"></div>
      <div class="col-2 blockquote">
        <label for="mobile" class="required-label"> הופנה על ידי</label>
      </div>
      <div class="col-2">
        <input type="text" id="referredBy" name="referredBy" [(ngModel)]="newDetailsAsker.referredBy"
          formControlName="refferalB" required>
      </div>
    </div>
    <div class="row">
    </div>
    <div class="row justify-content-center">
      <div class="col-md-auto d-flex ">
        <button type="submit" [disabled]="form.invalid" class="btn" (click)="sendIntake()">שליחה לאינטייק</button>
      </div>
      <div class="col-md-auto d-flex ">
        <button type="submit" [disabled]="form.invalid" class="btn" (click)="sendManager()">שליחה למנהל הפניות </button>
      </div>
    </div>
  </form>
</div>

